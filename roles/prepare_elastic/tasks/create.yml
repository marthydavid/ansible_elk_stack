- name: Create pv and vg
  lvg:
    vg: elastic
    pvs: '{{ second_disk_path }}'
    pesize: 32

- name: Create volume
  lvol:
    vg: elastic
    lv: storage
    size: +100%FREE

- name: create FS for the volume
  filesystem:
    fstype: xfs
    dev: /dev/elastic/storage
    force: yes

- name: Create /opt/elastic-storage
  file:
    path: '{{ create_elasticsearch_path }}'
    owner: root
    group: root
    mode: 0755
    state: directory


- name: mount fs
  mount:
    path: '{{ create_elasticsearch_path }}'
    src: /dev/elastic/storage
    fstype: ext4
    state: present


